<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <title>Attachement</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="style-top.css" />
    <style>
      #datesForage::placeholder,
      #QuantiteForage::placeholder,
      #UniteForage::placeholder,
      #datesMinage::placeholder,
      #QuantiteMinage::placeholder,
      #UniteMinage::placeholder {
        color: #0d6efd;
      }
      .is-invalid {
        border-color: #dc3545;
        box-shadow: 0 0 0 0.2rem rgba(220, 53, 69, 0.25);
      }
    </style>
  </head>

  <body style="height: 150vh" class="bg-primary">
    <div id="message" class="alert d-none"></div>

    <div class="container-fluid align-items-center custom-height-top">
      <div
        class="row bg-gradient bg-white p-4 align-items-center custom-height-top"
      >
        <div class="col col-2 text-start">
          <img
            src="logo techmine.svg"
            alt="bouton de menu"
            class="custom-height-logo"
          />
        </div>
        <div class="col col-8 text-center">
          <h1 class="custom-font-top ms-5">Attachement</h1>
        </div>
        <div class="col col-2 text-end h-20">
          <div class="dropdown text-center">
            <button
              class="btn dropdown-toggle"
              type="button"
              data-bs-toggle="dropdown"
              aria-expanded="false"
            >
              <img
                src="symbole-de-menu-pour-android.png"
                alt="bouton de menu"
                class="custom-height-menu"
              />
            </button>
            <ul
              class="dropdown-menu dropdown-menu-dark custom-menu text-center"
            >
              <li>
                <a class="dropdown-item" href="accueil.html"
                  >Retourner à l'accueil</a
                >
              </li>
              <li><hr class="dropdown-divider" /></li>
              <li><a class="dropdown-item" href="rapport.html">Rapports</a></li>
              <li>
                <a class="dropdown-item" href="liste-rapport.html"
                  >Liste des Rapports</a
                >
              </li>
              <li><hr class="dropdown-divider" /></li>
              <li>
                <a class="dropdown-item" href="attachement.html"
                  >Attachements</a
                >
              </li>
              <li>
                <a class="dropdown-item" href="liste-attachement.html"
                  >Liste des attachements</a
                >
              </li>
              <li><hr class="dropdown-divider" /></li>
              <li>
                <a class="dropdown-item" href="signalement.html">Signalement</a>
              </li>
              <li>
                <a class="dropdown-item" href="liste-intervention.html"
                  >Liste des interventions</a
                >
              </li>
              <li>
                <a class="dropdown-item" href="historique-intervention.html"
                  >Historique des interventions</a
                >
              </li>
              <li><hr class="dropdown-divider menu-item-admin" /></li>
              <li><hr class="dropdown-divider menu-item-admin" /></li>
              <li class="menu-item-admin">
                <div class="dropdown-header" style="font-size: 2rem">
                  Administrateur
                </div>
              </li>
              <li class="menu-item-admin">
                <a class="dropdown-item" href="ajout-utilisateur.html"
                  >Gestion des Utilisateurs</a
                >
              </li>
              <li class="menu-item-admin">
                <a class="dropdown-item" href="ajout-client.html"
                  >Gestion des Clients</a
                >
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
    <div id="message" class="alert d-none"></div>
    <!-- bloc du bas -->
    <div class="container-fluid bg-primary custom-height-bot">
      <div class="row">
        <div class="col col-1"></div>
        <div class="col col-10 text-center">
          <div class="mt-3">
            <button type="button" class="btn btn-light BtnStep" id="BtnStep" onclick="showTab(0)">
              Chantier
            </button>
            <button type="button" class="btn btn-light BtnStep" id="BtnStep" onclick="showTab(1)">
              Forage
            </button>
            <button type="button" class="btn btn-light BtnStep" id="BtnStep" onclick="showTab(2)">
              Minage
            </button>
            <button type="button" class="btn btn-light BtnStep" id="BtnStep" onclick="showTab(3)">
              Autre
            </button>
            <button type="button" class="btn btn-light BtnStep step-att" id="BtnStep" onclick="showTab(4)">
              gnr
            </button>
            <button type="button" class="btn btn-light BtnStep step-att" id="BtnStep" onclick="showTab(5)">
              Pièces Jointes
            </button>
            <button type="button" class="btn btn-secondary BtnStep" id="submit">
              Valider
            </button>
          </div>
        </div>
        <div class="col col-1"></div>
      </div>
      <div class="row text-center mt-3">
        <div class="alert-container" id="alert-container"></div>
        <!-- form chantier-->
        <div class="col col-12 text-center">
          <div
            class="container-fluid bg-white p-3 rounded-4 form-container align-items-center align-self-center tab custom-height-tab"
          >
            <table class="table table-bordered border-primary">
              <tr>
                <td
                  class="fw-bold custom-font-sub-title text-primary"
                  style="width: 33%"
                >
                  CLIENT
                </td>
                <td
                  class="fw-bold custom-font-sub-title text-primary"
                  style="width: 33%"
                >
                  CARRIERE / CHANTIER
                </td>
                <td
                  class="fw-bold custom-font-sub-title text-primary"
                  style="width: 33%"
                >
                  OBSERVATION
                </td>
              </tr>
              <tr style="height: 10vh">
                <td>
                  <input
                    type="text"
                    class="border border-white input-table"
                    id="client"
                  />
                </td>
                <td>
                  <input
                    type="text"
                    class="border border-white input-table"
                    id="chantier"
                  />
                </td>
                <td>
                  <input type="checkbox" class="form-check-input border border-primary mx-1" id="checkboxPerte"/>
                  <label class="form-check-label" for="checkboxPerte">Perte outillage dans tir</label>
                  <input
                    type="text"
                    class="border border-white input-table"
                    id="obsevation"
                  />
                </td>
              </tr>
            </table>
            <button
              type="button"
              id="valider"
              class="btn btn-white border-primary text-primary fw-bold border-3 custom-height-btn"
              onclick="validStep(0)"
            >
              valider
            </button>
          </div>

          <!-- form forage-->
          <div class="col col-12 text-center">
            <div
              class="container-fluid bg-white p-3 rounded-4 form-container align-items-center align-self-center tab custom-height-tab text-primary"
            >
              <table
                class="table table-bordered border-primary"
                style="height: 25vh"
              >
                <tr>
                  <td>
                    <div class="mb-3">
                      <label for="daterange" class="form-label"></label>
                      <input
                        type="text"
                        class="form-control border border-white border border-white input-table-1"
                        id="datesForage"
                        placeholder="Cliquez pour choisir une date"
                      />
                    </div>
                  </td>
                </tr>
                <tr style="height: 10vh">
                  <td style="width: 100vh">
                    <h3 class="custom-font-sub-title mx-1">
                      désignation des travaux
                    </h3>
                    <table
                      class="table-bordered border-primary w-100"
                      style="height: 30vh"
                    >
                      <tr>
                        <td>
                          <div class="form-check">
                            <input
                              class="form-check-input border border-primary mx-1"
                              type="checkbox"
                              value="oui"
                              id="forage"
                            />
                            <label
                              class="form-check-label text-primary fw-bold me-5"
                              for="flexCheckDefault"
                            >
                              Forage
                            </label>
                          </div>
                        </td>
                        <td>
                          <input
                            type="text"
                            placeholder="HMF* début"
                            class="text-primary border border-white input-table-2"
                            id="HMFDebut"
                          />
                        </td>
                      </tr>
                      <tr>
                        <td>
                          <input
                            type="text"
                            placeholder="N° du plan de forage"
                            class="text-primary border border-white input-table-2"
                            id="NPlanForage"
                          />
                        </td>
                        <td>
                          <input
                            type="text"
                            placeholder="HMF* fin"
                            class="text-primary border border-white input-table-2"
                            id="HMFFin"
                          />
                        </td>
                      </tr>
                      <tr>
                        <td>
                          <input
                            type="text"
                            placeholder="Diamètre de forage"
                            class="text-primary border border-white input-table-2"
                            id="DiametreForage"
                          />
                        </td>
                        <td>
                          <table style="width: 100%">
                            <tr>
                              <td
                                class="border border-primary border-top-0 border-start-0 border-bottom-0"
                              >
                                <input
                                  type="text"
                                  placeholder="H de panne"
                                  class="text-primary border border-white input-table-2"
                                  id="HeuresPanne"
                                />
                              </td>
                              <td>
                                <input
                                  type="text"
                                  placeholder="commentaire"
                                  class="text-primary border border-white input-table-2"
                                  id="CommP"
                                />
                              </td>
                            </tr>
                          </table>
                        </td>
                      </tr>
                      <tr>
                        <td>
                          <input
                            type="text"
                            placeholder="Transfert (1 ou 0)"
                            class="text-primary border border-white input-table-2"
                            id="Transfert"
                          />
                        </td>
                        <td>
                          <table style="width: 100%">
                            <tr>
                              <td
                                class="border border-primary border-top-0 border-bottom-0 border-start-0"
                              >
                                <input
                                  type="text"
                                  placeholder="H d'arrêt"
                                  class="text-primary border border-white input-table-2"
                                  id="HeuresArret"
                                />
                              </td>
                              <td>
                                <input
                                  type="text"
                                  placeholder="commentaire"
                                  class="text-primary border border-white input-table-2"
                                  id="CommA"
                                />
                              </td>
                            </tr>
                          </table>
                        </td>
                      </tr>
                    </table>
                    <br />
                  </td>
                </tr>
                <tr>
                  <td>
                    <input
                      type="text"
                      class="border border-white border border-white input-table-1"
                      id="QuantiteForage"
                      placeholder="Quantité"
                    />
                  </td>
                </tr>
                <tr>
                  <td>
                    <input
                      type="text"
                      class="border border-white border border-white input-table-1"
                      id="UniteForage"
                      placeholder="Unité"
                    />
                  </td>
                </tr>
              </table>
              <button
                type="button"
                id="valider"
                class="btn btn-white border-primary text-primary fw-bold border-3 custom-height-btn"
                onclick="validStep(1)"
              >
                valider
              </button>
              <p class="mt-2">*HMF = heure Moteur Foreuse</p>
            </div>

            <!-- form minage-->
            <div class="col col-12 text-center">
              <div
                class="container-fluid bg-white p-3 rounded-4 form-container align-items-center align-self-center tab custom-height-tab text-primary"
              >
                <table class="table table-bordered border-primary">
                  <tr>
                    <td>
                      <div class="mb-3">
                        <label
                          for="daterange2"
                          class="form-label fw-bold"
                        ></label>
                        <input
                          type="text"
                          class="form-control border border-white border border-white input-table-1"
                          id="datesMinage"
                          placeholder="Cliquez pour choisir une date"
                        />
                      </div>
                    </td>
                  </tr>
                  <tr>
                    <td style="width: 100vh">
                      <h3 class="custom-font-sub-title mx-1">
                        désignation des travaux
                      </h3>
                      <table
                        class="table table-bordered border-primary"
                        style="height: 30vh"
                      >
                        <tr>
                          <td>
                            <div class="form-check mb-3">
                              <input
                                class="form-check-input border border-primary mx-1"
                                type="checkbox"
                                value=""
                                id="minage"
                              />
                              <label
                                class="form-check-label text-primary fw-bold me-5"
                                for="flexCheckDefault"
                              >
                                Minage
                              </label>
                            </div>
                          </td>
                        </tr>
                        <tr>
                          <td>
                            <input
                              type="text"
                              placeholder=" N° du plan de tir"
                              class="text-primary border border-white input-table-2"
                              id="NPlanTir"
                            />
                          </td>
                        </tr>
                        <tr>
                          <td class="text-primary">
                            implantation
                            <div
                              class="btn-group"
                              role="group"
                              aria-label="Basic radio toggle button group"
                              id="Implantation"
                            >
                              <input
                                type="radio"
                                class="btn-check"
                                name="laser2D"
                                id="laser2D"
                                autocomplete="off"
                              />
                              <label
                                class="btn btn-outline-primary"
                                for="laser2D"
                                >Laser 2D</label
                              >

                              <input
                                type="radio"
                                class="btn-check"
                                name="GPS"
                                id="GPS"
                                autocomplete="off"
                              />
                              <label class="btn btn-outline-primary" for="GPS"
                                >GPS</label
                              >

                              <input
                                type="radio"
                                class="btn-check"
                                name="Autres"
                                id="Autres"
                                autocomplete="off"
                              />
                              <label
                                class="btn btn-outline-primary"
                                for="btnradio3"
                                >Autres</label
                              >
                            </div>
                          </td>
                        </tr>
                        <tr>
                          <td>
                            <input
                              type="text"
                              placeholder="Nombre de sismographes posés"
                              class="text-primary border border-white input-table-2"
                              id="NbSismographes"
                            />
                          </td>
                        </tr>
                      </table>
                    </td>
                  </tr>
                  <tr>
                    <td>
                      <input
                        type="text"
                        class="border border-white border border-white input-table-1"
                        id="QuantiteMinage"
                        placeholder="Quantité"
                      />
                    </td>
                  </tr>
                  <tr>
                    <td>
                      <input
                        type="text"
                        class="border border-white border border-white input-table-1"
                        id="UniteMinage"
                        placeholder="Unité"
                      />
                    </td>
                  </tr>
                </table>
                <button
                  type="button"
                  id="valider"
                  class="btn btn-white border-primary text-primary fw-bold border-3 custom-height-btn"
                  onclick="validStep(2)"
                >
                  valider
                </button>
              </div>
            </div>

            <!-- form autre-->
            <div class="col col-12 text-center">
              <div
                class="container-fluid bg-white p-3 rounded-4 form-container align-items-center align-self-center tab custom-height-tab text-primary"
              >
                <input
                  type="text"
                  class="border border-white input-table text-primary"
                  id="autre"
                  placeholder="Autre"
                />
                <button
                  type="button"
                  id="valider"
                  class="btn btn-white border-primary text-primary fw-bold border-3 custom-height-btn"
                  onclick="validStep(3)"
                >
                  valider
                </button>
              </div>
            </div>

            <!-- form gnr-->
            <div class="col col-12 text-center">
              <div
                class="container-fluid bg-white p-3 rounded-4 form-container align-items-center align-self-center tab custom-height-tab text-primary"
              >
                GNR fourni par le client :
                <div
                  class="btn-group"
                  role="group"
                  aria-label="Basic radio toggle button group"
                  id="GNR"
                >
                  <input
                    type="radio"
                    class="btn-check"
                    name="Oui"
                    id="Oui"
                    autocomplete="off"
                  />
                  <label class="btn btn-outline-primary" for="Oui">OUI</label>

                  <input
                    type="radio"
                    class="btn-check"
                    name="Oui"
                    id="Non"
                    autocomplete="off"
                  />
                  <label class="btn btn-outline-primary" for="Non">NON</label>
                  <div class="input-group">
                    <span
                      class="input-group-text custom-font-input bg-primary border border-primary text-white"
                      style="margin-left: 1vh; height: 3vh"
                      id="addon-wrapping"
                      >Quantité :</span
                    >
                    <input
                      type="text"
                      class="form-control border border-primary-subtle"
                      placeholder=""
                      aria-label="QuantiteGNR"
                      aria-describedby="addon-wrapping"
                      id="QuantiteGNR"
                    />
                  </div>
                </div>

                <br />
                <br />
                <button
                  type="button"
                  id="valider"
                  class="btn btn-white border-primary text-primary fw-bold border-3 custom-height-btn"
                  onclick="validStep(4)"
                >
                  valider
                </button>
              </div>
            </div>

            <!-- form Pièces Jointes-->
            <div class="col col-12 text-center">
              <div class="container-fluid bg-white p-3 rounded-4 form-container align-items-center align-self-center tab custom-height-tab text-primary">
                Pour ajouter les pièces jointes nécesaires
                </br>
                <div class="input-group mb-3">
                  <input id="selectFiles" type="file" class="form-control" id="inputFiles" multiple/>
                  <label class="input-group-text" for="inputFiles">Upload</label>
                </div>  
                </br>
                <div class="form-check">
                  <input type="checkbox" id="checkboxCertif" class="form-check-input border border-primary mx-1" value="test" required/>
                  <label class="form-check-label" for="checkboxCertif">Je certifie l’exactitude des informations entrées dans le/les fichiers ci joints</label>
                </div>
                </br>
                </br>
                
                <button
                  type="button"
                  id="validateFiles"
                  class="btn btn-white border-primary text-primary fw-bold border-3 custom-height-btn"
                  onclick="validStep(5)"
                >
                  valider
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"></script>
    <script
      type="text/javascript"
      src="https://cdn.jsdelivr.net/jquery/latest/jquery.min.js"
    ></script>
    <script
      type="text/javascript"
      src="https://cdn.jsdelivr.net/momentjs/latest/moment.min.js"
    ></script>
    <script
      type="text/javascript"
      src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"
    ></script>
    <script
      type="module"
      src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js"
    ></script>
    <script
      type="module"
      src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js"
    ></script>
    <script src="script-att.js"></script>
    <script>
      $(document).ready(function () {
        $("#datesForage, #datesMinage").daterangepicker(
          {
            locale: {
              format: "DD-MM-YYYY",
              separator: " au ",
              applyLabel: "Appliquer",
              cancelLabel: "Annuler",
              fromLabel: "Du",
              toLabel: "À",
              customRangeLabel: "Personnalisé",
              weekLabel: "S",
              daysOfWeek: ["Dim", "Lun", "Mar", "Mer", "Jeu", "Ven", "Sam"],
              monthNames: [
                "Janvier",
                "Février",
                "Mars",
                "Avril",
                "Mai",
                "Juin",
                "Juillet",
                "Août",
                "Septembre",
                "Octobre",
                "Novembre",
                "Décembre",
              ],
              firstDay: 1,
            },
            opens: "right",
            autoUpdateInput: false,
          },
          function (start, end, label) {
            if (start.format("DD-MM-YYYY") === end.format("DD-MM-YYYY")) {
              this.element.val(start.format("DD-MM-YYYY"));
            } else {
              this.element.val(
                start.format("DD-MM-YYYY") + " au " + end.format("DD-MM-YYYY")
              );
            }
          }
        );
      });
    </script>
    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/9.1.0/firebase-app.js";
      import {
        getDatabase,
        ref,
        get,
        set,
      } from "https://www.gstatic.com/firebasejs/9.1.0/firebase-database.js";

      const firebaseConfig = {
        apiKey: "AIzaSyA5KivS1hhrIufEYwt8T8MN1hguKa3aSMY",
        authDomain: "test-techmine.firebaseapp.com",
        databaseURL:
          "https://test-techmine-default-rtdb.europe-west1.firebasedatabase.app",
        projectId: "test-techmine",
        storageBucket: "test-techmine.appspot.com",
        messagingSenderId: "876142620682",
        appId: "1:876142620682:web:5bad29bd4f71d82be6aff3",
        measurementId: "G-2LKJFXNQ58",
      };

      const app = initializeApp(firebaseConfig);
      const db = getDatabase();

      let submitBtn = document.getElementById("submit");

      async function getLastAttachementNumber() {
        const snapshot = await get(ref(db, "Attachement"));
        if (!snapshot.exists()) {
          return 9999;
        }
        const attachements = snapshot.val();
        const numbers = Object.keys(attachements).map((key) => parseInt(key));
        return Math.max(...numbers);
      }

      async function AddData() {
        if (!allStepsValid()) {
          showMessageError(
            "Veuillez valider toutes les étapes avant de soumettre.",
            "warning"
          );
          return;
        }

        let client = document.getElementById("client").value || "";
        let chantier = document.getElementById("chantier").value || "";
        let observation = document.getElementById("obsevation").value || "";
        let forage = document.getElementById("forage").checked ? "oui" : "non";
        let HMFDebut = document.getElementById("HMFDebut").value || "";
        let NPlanForage = document.getElementById("NPlanForage").value || "";
        let HMFFin = document.getElementById("HMFFin").value || "";
        let DiametreForage =
          document.getElementById("DiametreForage").value || "";
        let HeuresPanne = document.getElementById("HeuresPanne").value || "";
        let HeuresArret = document.getElementById("HeuresArret").value || "";
        let QuantiteForage =
          document.getElementById("QuantiteForage").value || "";
        let UniteForage = document.getElementById("UniteForage").value || "";
        let minage = document.getElementById("minage").checked ? "oui" : "non";
        let NPlanTir = document.getElementById("NPlanTir").value || "";
        let NbSismographes =
          document.getElementById("NbSismographes").value || "";
        let QuantiteMinage =
          document.getElementById("QuantiteMinage").value || "";
        let UniteMinage = document.getElementById("UniteMinage").value || "";
        let autre = document.getElementById("autre").value || "";
        let datesForage = document.getElementById("datesForage").value || "";
        let datesMinage = document.getElementById("datesMinage").value || "";
        let GNR = document.getElementById("Oui").checked
          ? "Oui"
          : document.getElementById("Non").checked
          ? "Non"
          : "";
        let implantation = getImplantationValue();
        let Transfert = document.getElementById("Transfert").value || "";
        let CommP = document.getElementById("CommP").value || "";
        let CommA = document.getElementById("CommA").value || "";
        let QuantiteGNR = document.getElementById("QuantiteGNR").value || "";
        let perteOutillageTir = document.getElementById("checkboxPerte").checked;

        const lastNumber = await getLastAttachementNumber();
        const newNumber = lastNumber + 1;

        const date = new Date().toLocaleDateString("fr-FR");
        const user = sessionStorage.getItem("user-uid");

        set(ref(db, "Attachement/" + newNumber), {
          infos: {
            client: client,
            chantier: chantier,
            observation: observation,
            forage: forage,
            HMFDebut: HMFDebut,
            NPlanForage: NPlanForage,
            HMFFin: HMFFin,
            DiametreForage: DiametreForage,
            HeuresPanne: HeuresPanne,
            HeuresArret: HeuresArret,
            QuantiteForage: QuantiteForage,
            UniteForage: UniteForage,
            minage: minage,
            NPlanTir: NPlanTir,
            NbSismographes: NbSismographes,
            QuantiteMinage: QuantiteMinage,
            UniteMinage: UniteMinage,
            autre: autre,
            GNR: GNR,
            datesForage: datesForage,
            datesMinage: datesMinage,
            implantation: implantation,
            Transfert: Transfert,
            CommP: CommP,
            CommA: CommA,
            QuantiteGNR: QuantiteGNR,
            perteOutillageTir: perteOutillageTir,
          },
          date: date,
          user: user,
          dateTimestamp: new Date().getTime(),
        })
          .then(() => {
            showMessage(
              "Données sauvegardées avec succès !",
              "success",
              newNumber
            );
          })
          .catch((error) => {
            showMessage(
              "Erreur lors de la sauvegarde des données : " + error.message,
              "danger"
            );
          });
      }

      function showMessage(message, type, newNumber) {
        const messageContainer = document.getElementById("alert-container");
        messageContainer.innerHTML = `<div class="alert alert-${type} alert-dismissible fade show" role="alert">
                                  ${message}
                                  <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                                </div>`;
        setTimeout(() => {
          const alert = bootstrap.Alert.getInstance(
            document.querySelector(".alert")
          );
          alert.close();
        }, 5000);

        setTimeout(() => {
          const newUrl = "Impression-attachement.html?number=" + newNumber;
          window.location.href = newUrl;
        }, 3000);
      }
      function showMessageError(message, type, newNumber) {
        const messageContainer = document.getElementById("alert-container");
        messageContainer.innerHTML = `<div class="alert alert-${type} alert-dismissible fade show" role="alert">
                                  ${message}
                                  <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                                </div>`;
      }

      function getImplantationValue() {
        let radios = document
          .getElementById("Implantation")
          .getElementsByTagName("input");
        for (let i = 0; i < radios.length; i++) {
          if (radios[i].checked) {
            return radios[i].id;
          }
        }
        return "";
      }

      submitBtn.addEventListener("click", AddData);
    </script>
    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/9.1.0/firebase-app.js";
      import {
        getStorage,
        ref,
        uploadBytes,
      } from "https://www.gstatic.com/firebasejs/9.1.0/firebase-storage.js";

      const storage = getStorage();

      let selectedFiles = [];
      const validateFiles = document.getElementById("submit");

      document.getElementById("selectFiles").addEventListener("change", (e) => {
        selectedFiles = e.target.files;
      });

      validateFiles.addEventListener("click", () => {
        if (allStepsValid()) {
          for (let i = 0; i < selectedFiles.length; i++) {
            const file = selectedFiles[i];
            const storageRef = ref(storage, "attachments/" + file.name);
            uploadBytes(storageRef, file).then((snapshot) => {
              console.log("Uploaded a file:", file.name);
            });
          }
        }
      });
    </script>
  </body>
</html>
